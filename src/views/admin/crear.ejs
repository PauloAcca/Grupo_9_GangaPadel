<head>
    <%- include('../partials/head.ejs') %>
    <%- include('../partials/header-footer-stylesheet.ejs') %>
    
    <link rel="stylesheet" href="/css/agregado.css">
    <title>Pagina agregado de productos</title>
</head>
<body>
	<header>
		<%- include('../partials/header')  %>
    	<%- include('../partials/navbar.ejs') %>
	</header>
	
	<main>
		<h2>Crear producto</h2>
		<form id="form" action="/admin/add" method="POST" enctype="multipart/form-data">
			<label for="name">Producto:</label>
			<input type="text" id="name" name="name" value="<%= locals.oldData && locals.oldData.name ? locals.oldData.name : '' %>">
			<% if (locals.errors && errors.name) { %>
				<p class="ojo"><%= errors.name.msg %></p>
			<% } %>
			
			<label for="price">Precio:</label>
			<input type="text" id="price" name="price" placeholder="Ej: 60000" value="<%= locals.oldData && locals.oldData.price ? locals.oldData.price : '' %>">
			<% if (locals.errors && errors.price) { %>
				<p class="ojo"><%= errors.price.msg %></p>
			<% } %>

			<label for="discount">Descuento:</label>
			<div>
				<input type="range" id="discount" name="discount" min="0" max="100" value="<%= locals.oldData && locals.oldData.discount ? locals.oldData.discount : '0' %>" onchange="updateDiscountValue(this.value)">
				<span id="discountValue"><%= locals.oldData && locals.oldData.discount ? locals.oldData.discount : '0' %></span>%
			</div>
			<script src="/js/barraPorcentaje.js"></script>

			<label for="category">Categoría:</label>
			<select id="category" name="category">
				<% for (let i=0; i< categoria.length; i++) { %>
				<option value=" <%=categoria[i].idCategoria %>"> <%=categoria[i].categoria%></option>
			<% } %>
			</select>
			
			<label for="description">Descripción:</label>
			<textarea id="description" name="description"><%= locals.oldData && locals.oldData.description ? locals.oldData.description : '' %></textarea>
			<% if (locals.errors && errors.description) { %>
    			<p class="ojo"><%= errors.description.msg %></p>
			<% } %>
			
			<label for="brand">Marca:</label>
			<select id="brand" name="brand">
				<% for (let i=0; i< marca.length; i++) { %>
					<option value=" <%=marca[i].idMarca %>"> <%=marca[i].nombreMarca%></option>
				<% } %>
			</select>
			
			<label for="image">Imagen:</label>
			<input type="file" id="image" name="image">
			<% if (locals.errors && errors.image) { %>
				<p class="ojo"><%= errors.image.msg %></p>
			<% } %>
			<button type="submit">Crear</button>
		</form>
	</main>
    
	<footer>
		<%- include('../partials/footer')  %>
	</footer>
	
</body>


